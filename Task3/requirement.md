# Требования к безопасности

## Транспорт и сеть
1. Все вызовы между PropDevelopment и внешней платформой — TLS 1.2+ (рекомендовано 1.3), строгая проверка сертификатов, HSTS для публичных точек. 
2. Для backend↔backend — mTLS с выделенными интеграционными сертификатами, ротация не реже 90 дней. 
3. IP-allowlist и/или Private Link/VPN для интеграционных эндпоинтов, если доступно. Вебхуки принимаются только с доверенных сетей/подписей. 
4. Запрет слабых шифров; минимальные требования: ECDHE + AES-GCM/CHACHA20-POLY1305.

## Данные и PII
1. Минимизация данных: передаём только то, что нужно для авторизации доступа (ID жильца/домой/устройства/авто), без лишних ПДн. 
2. Классификация и маскирование/редакция ПДн в логах, запрет логирования секретов и токенов. 
3. Шифрование на хранении (at rest) на стороне обеих систем для журналов доступа и биометрических ссылок/идентификаторов. 
4. Сроки хранения и политика удаления событий/логов оговариваются (например, 12 мес. для аудита, затем агрегация/анонимизация).

## Секреты и ключи
1. Обмен ключами — через защищённый канал; хранение секретов в Vault/KMS. Запрет хранения секретов в ENV без шифрования. 
2. Регулярная ротация client_secret/JWK/сертификатов (90 дней) и отзыв при компрометации.

## Защита интеграционных API
1. Rate limiting и WAF на стороне PropDevelopment API Gateway.
2. Версионирование API (URI или header), совместимость минимум N–1.

# Протоколы аутентификации и авторизации
Пользовательский контур (мобильное приложение):
1. Клиент аутентифицируется в мобильном приложении через существующий IdP PropDevelopment (OIDC/OAuth 2.0).
2. Приложение обращается только к backend PropDevelopment; прямых вызовов к партнёру нет.

# Нефункциональные и эксплуатационные аспекты
1. Наблюдаемость: трассировка (OpenTelemetry), метрики (latency, error rate, webhook lag), алерты по SLO. 
2. Договорные SLO/SLA с партнёром: доступность ≥ 99.9%, MTTR, окна обслуживания; чёткие контракты ошибок (problem+json), коды и причины. 
3. Управление версиями: семантическое версионирование API, депрекация с уведомлением ≥ 90 дней. 
4. Тестовые окружения: песочница партнёра, фикстуры устройств, нагрузочные профили перед релизом маркетинговых кампаний.